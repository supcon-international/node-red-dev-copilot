<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <style>
      .dev-copilot-container {
        height: 100%;
        display: flex;
        flex-direction: column;
        padding: 6px;
        box-sizing: border-box;
        overflow: hidden;
      }

      .dev-copilot-header {
        border-bottom: 1px solid #ddd;
        padding-bottom: 6px;
        margin-bottom: 6px;
        flex-shrink: 0;
      }

      .dev-copilot-node-selector {
        width: 100%;
        padding: 3px;
        margin-bottom: 6px;
        border: 1px solid #ccc;
        border-radius: 3px;
        font-size: 12px;
      }

      .dev-copilot-config-btn {
        background: #428bca;
        color: white;
        border: none;
        padding: 4px 8px;
        border-radius: 3px;
        cursor: pointer;
        font-size: 11px;
      }

      .dev-copilot-config-btn:hover {
        background: #357ebd;
      }

      .dev-copilot-messages {
        flex: 1;
        min-height: 900px;
        max-height: 1000px;
        overflow-y: auto;
        border: 1px solid #ddd;
        border-radius: 3px;
        padding: 8px;
        margin-bottom: 6px;
        background: #fafafa;
        scroll-behavior: smooth;
      }

      .dev-copilot-messages::after {
        content: "";
        display: table;
        clear: both;
      }

      /* 滚动条样式 */
      .dev-copilot-messages::-webkit-scrollbar {
        width: 8px;
      }

      .dev-copilot-messages::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 4px;
      }

      .dev-copilot-messages::-webkit-scrollbar-thumb {
        background: #c1c1c1;
        border-radius: 4px;
      }

      .dev-copilot-messages::-webkit-scrollbar-thumb:hover {
        background: #a8a8a8;
      }

      .dev-copilot-message {
        margin-bottom: 15px;
        padding: 8px 12px;
        border-radius: 8px;
        width: fit-content;
        max-width: 85%;
        word-wrap: break-word;
        white-space: pre-wrap;
        font-size: 13px;
        line-height: 1.4;
        display: block;
        position: relative;
      }

      .dev-copilot-user {
        background: #007bff;
        color: white;
        margin-left: auto;
        margin-right: 0;
        text-align: left;
        float: right;
        clear: both;
        box-shadow: 0 2px 4px rgba(0, 123, 255, 0.2);
      }

      .dev-copilot-assistant {
        background: #e9ecef;
        color: #333;
        margin-right: auto;
        margin-left: 0;
        float: left;
        clear: both;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        border: 1px solid #dee2e6;
      }

      .dev-copilot-error {
        background: #f8d7da;
        color: #721c24;
        border: 1px solid #f5c6cb;
        margin-right: auto;
        margin-left: 0;
        float: left;
        clear: both;
      }

      .dev-copilot-loading {
        animation: pulse 1.5s ease-in-out infinite;
      }

      @keyframes pulse {
        0% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
        100% {
          opacity: 1;
        }
      }

      .dev-copilot-content {
        flex: 1;
        display: flex;
        flex-direction: column;
        min-height: 0;
      }

      .dev-copilot-input-area {
        display: flex;
        gap: 4px;
        flex-shrink: 0;
        margin-bottom: 2px;
      }

      .dev-copilot-input {
        flex: 1;
        padding: 6px 8px;
        border: 1px solid #ccc;
        border-radius: 3px;
        resize: vertical;
        min-height: 32px;
        max-height: 80px;
        font-family: inherit;
        font-size: 13px;
      }

      .dev-copilot-send {
        background: #28a745;
        color: white;
        border: none;
        padding: 6px 12px;
        border-radius: 3px;
        cursor: pointer;
        font-size: 12px;
        white-space: nowrap;
      }

      .dev-copilot-send:hover {
        background: #218838;
      }

      .dev-copilot-send:disabled {
        background: #6c757d;
        cursor: not-allowed;
      }
      /* 
      .dev-copilot-info {
        margin-top: 4px;
        padding: 4px 6px;
        background: #d1ecf1;
        border: 1px solid #bee5eb;
        border-radius: 3px;
        font-size: 12px;
        color: #0c5460;
        flex-shrink: 0;
        text-align: center;
      } */

      .dev-copilot-empty-state {
        text-align: center;
        color: #666;
        font-style: italic;
        margin-top: 50px;
      }

      .dev-copilot-title {
        font-weight: bold;
        margin-bottom: 6px;
        color: #333;
        font-size: 14px;
      }

      .dev-copilot-shortcuts {
        font-size: 12px;
        color: #666;
        margin-top: 2px;
        margin-bottom: 2px;
        flex-shrink: 0;
        text-align: center;
      }
    </style>
  </head>
  <body>
    <div class="dev-copilot-container">
      <!-- 头部 -->
      <div class="dev-copilot-header">
        <div class="dev-copilot-title">AI Development Copilot</div>

        <!-- 节点选择器 -->
        <select id="dev-copilot-node-select" class="dev-copilot-node-selector">
          <option value="">Loading nodes...</option>
        </select>

        <!-- 配置按钮 -->
        <button id="dev-copilot-config" class="dev-copilot-config-btn">
          <i class="fa fa-cog"></i> Configure
        </button>
      </div>

      <!-- 主要内容区域 -->
      <div class="dev-copilot-content">
        <!-- 消息区域 -->
        <div id="dev-copilot-messages" class="dev-copilot-messages">
          <div class="dev-copilot-empty-state">
            Select a Dev Copilot node and start chatting!<br />
            <small
              >Ask about Node-RED development questions.</small
            >
          </div>
        </div>

        <!-- 输入区域 -->
        <div class="dev-copilot-input-area">
          <textarea
            id="dev-copilot-input"
            class="dev-copilot-input"
            placeholder="Ask me anything about development..."
            rows="1"
          ></textarea>
          <button id="dev-copilot-send" class="dev-copilot-send">
            <i class="fa fa-paper-plane"></i> Send
          </button>
        </div>

        <!-- 快捷键提示 -->
        <div class="dev-copilot-shortcuts">
          <strong>Tips:</strong> Enter to send • Shift+Enter for new line
        </div>
      </div>

      <!-- 信息区域 -->
      <!-- <div class="dev-copilot-info">
        <strong>Ready:</strong> AI Assistant with MCP Tools
      </div>
    </div> -->

    <script>
      // 自动调整输入框高度
      document.addEventListener("DOMContentLoaded", function () {
        const textarea = document.getElementById("dev-copilot-input");
        if (textarea) {
          textarea.addEventListener("input", function () {
            this.style.height = "auto";
            this.style.height = Math.min(this.scrollHeight, 100) + "px";
          });
        }
      });
    </script>
  </body>
</html>
